import{S as Te,i as Ae,s as De,e as o,t as L,k as b,c as n,a as u,h as M,d as c,m as w,b as l,L as Pe,g as Re,J as e,M as se,N as de,j as ae,K as Ee,O as Ne,P as Ve,Q as Ue,R as je,T as Ce,U as xe}from"../chunks/vendor-ae472a7e.js";function Le(a){let m,s,I,v,P,B,T,i,A,S,V,_,U,g,C,p,t,H,d,O,K,D,q,r,y,re,z,R,E,Q,oe,j,F,X,ne,J,Y,Z,ie,N,W,$,ce,G,ue,fe;return{c(){m=o("main"),s=o("div"),I=o("span"),v=o("span"),P=L("Pomodorify"),B=b(),T=o("div"),i=o("div"),A=o("div"),S=L("Focus Playlist:"),V=b(),_=o("input"),U=b(),g=o("div"),C=L("Break Playlist:"),p=b(),t=o("input"),H=b(),d=o("div"),O=o("hr"),K=b(),D=o("div"),q=L(a[5]),r=b(),y=o("hr"),re=b(),z=o("div"),R=o("span"),E=o("img"),oe=b(),j=o("div"),F=o("p"),X=L(a[3]),ne=b(),J=o("p"),Y=L(a[4]),ie=b(),N=o("div"),W=o("span"),$=L(a[6]),ce=b(),G=o("i"),this.h()},l(f){m=n(f,"MAIN",{class:!0});var h=u(m);s=n(h,"DIV",{class:!0});var pe=u(s);I=n(pe,"SPAN",{class:!0});var he=u(I);v=n(he,"SPAN",{class:!0});var me=u(v);P=M(me,"Pomodorify"),me.forEach(c),he.forEach(c),pe.forEach(c),B=w(h),T=n(h,"DIV",{class:!0});var ve=u(T);i=n(ve,"DIV",{class:!0});var x=u(i);A=n(x,"DIV",{});var _e=u(A);S=M(_e,"Focus Playlist:"),_e.forEach(c),V=w(x),_=n(x,"INPUT",{type:!0,class:!0}),U=w(x),g=n(x,"DIV",{});var ge=u(g);C=M(ge,"Break Playlist:"),ge.forEach(c),p=w(x),t=n(x,"INPUT",{type:!0,class:!0}),H=w(x),d=n(x,"DIV",{class:!0});var k=u(d);O=n(k,"HR",{class:!0}),K=w(k),D=n(k,"DIV",{class:!0});var ye=u(D);q=M(ye,a[5]),ye.forEach(c),r=w(k),y=n(k,"HR",{class:!0}),re=w(k),z=n(k,"DIV",{class:!0});var be=u(z);R=n(be,"SPAN",{class:!0});var ee=u(R);E=n(ee,"IMG",{src:!0,width:!0,height:!0,alt:!0}),oe=w(ee),j=n(ee,"DIV",{class:!0});var te=u(j);F=n(te,"P",{id:!0});var we=u(F);X=M(we,a[3]),we.forEach(c),ne=w(te),J=n(te,"P",{class:!0});var Ie=u(J);Y=M(Ie,a[4]),Ie.forEach(c),te.forEach(c),ee.forEach(c),be.forEach(c),ie=w(k),N=n(k,"DIV",{class:!0});var le=u(N);W=n(le,"SPAN",{});var Se=u(W);$=M(Se,a[6]),Se.forEach(c),ce=w(le),G=n(le,"I",{class:!0}),u(G).forEach(c),le.forEach(c),k.forEach(c),x.forEach(c),ve.forEach(c),h.forEach(c),this.h()},h(){l(v,"class","relative"),l(I,"class","font-inter font-extrabold relative inline-block before:inline before:absolute before:-inset-1 before:-skew-y-3 before:bg-stone-900"),l(s,"class","w-full text-center text-5xl"),l(_,"type","text"),l(_,"class","bg-stone-800 shadow-inner w-full text-center h-8 mb-4 p-1 focus:outline-none text-stone-500"),l(t,"type","text"),l(t,"class","bg-stone-800 shadow-inner w-full text-center h-8 p-1 focus:outline-none text-stone-500"),l(O,"class","bg-blue-900 h-[3px] border-none my-4 w-full"),l(D,"class","text-slate-200 text-4xl transition-colors duration-[1500s] text-center"),l(y,"class","bg-blue-900 h-[3px] border-none my-4 w-full"),Pe(E.src,Q=a[2])||l(E,"src",Q),l(E,"width","150px"),l(E,"height","150px"),l(E,"alt","Album Cover"),l(F,"id","title"),l(J,"class","text-xs text-gray-400"),l(j,"class","names my-2"),l(R,"class",Z="text-center flex flex-col items-center justify-center flex-1 "+(a[3]?"":" hidden")),l(z,"class","w-full h-full flex flex-col items-center"),l(G,"class","fa-solid fa-play"),l(N,"class","text-center text-white drop-shadow-lg cursor-pointer active:scale-95 transition-transform duration-75"),l(d,"class","flex flex-col w-full h-full"),l(i,"class","h-4/5 md:h-2/3 w-full md:w-auto md:aspect-[9/10] bg-gradient-to-t shadow-lg from-stone-800 to-stone-900 p-4 font-poppins relative flex flex-col"),l(T,"class","w-full h-full flex items-center justify-center"),l(m,"class","antialiased w-full h-full bg-gradient-to-br from-indigo-900 to-blue-900 text-white p-5")},m(f,h){Re(f,m,h),e(m,s),e(s,I),e(I,v),e(v,P),e(m,B),e(m,T),e(T,i),e(i,A),e(A,S),e(i,V),e(i,_),se(_,a[7][0]),e(i,U),e(i,g),e(g,C),e(i,p),e(i,t),se(t,a[7][1]),e(i,H),e(i,d),e(d,O),e(d,K),e(d,D),e(D,q),a[11](D),e(d,r),e(d,y),e(d,re),e(d,z),e(z,R),e(R,E),e(R,oe),e(R,j),e(j,F),e(F,X),e(j,ne),e(j,J),e(J,Y),e(d,ie),e(d,N),e(N,W),e(W,$),e(N,ce),e(N,G),a[12](d),ue||(fe=[de(_,"input",a[9]),de(t,"input",a[10]),de(N,"click",a[8])],ue=!0)},p(f,[h]){h&128&&_.value!==f[7][0]&&se(_,f[7][0]),h&128&&t.value!==f[7][1]&&se(t,f[7][1]),h&32&&ae(q,f[5]),h&4&&!Pe(E.src,Q=f[2])&&l(E,"src",Q),h&8&&ae(X,f[3]),h&16&&ae(Y,f[4]),h&8&&Z!==(Z="text-center flex flex-col items-center justify-center flex-1 "+(f[3]?"":" hidden"))&&l(R,"class",Z),h&64&&ae($,f[6])},i:Ee,o:Ee,d(f){f&&c(m),a[11](null),a[12](null),ue=!1,Ne(fe)}}}function Me(a){return a.replace(/http?s:\/\/open./,"").replace(".com","").replaceAll("/",":").split("?")[0]}function ke({context_uri:a,playerInstance:{_options:{getOAuthToken:m,id:s}}}){!s||m(I=>{fetch(`https://api.spotify.com/v1/me/player/play?device_id=${s}`,{method:"PUT",body:JSON.stringify({context_uri:a}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${I}`}})})}function Be(a,m,s){let I=document.createElement("script");I.src="https://sdk.scdn.co/spotify-player.js",document.body.appendChild(I);let v,P,B,T,i,A,S,V,_,U=125,g=1500,C="START",p,t=new Array;S=!1,A="25:00";function H(){U--,s(0,v.style.color=`hsl(${U}, 70%, 65%)`,v)}function d(){if(t!=[]&&!!p){for(let r=0;r<2;r++)t[r].includes(".com")&&s(7,t[r]=Me(t[r]),t);if(localStorage.setItem("p1",t[0]),localStorage.setItem("p2",t[1]),V){s(6,C="START"),p.pause(),clearInterval(V),clearInterval(_),V=null;return}if(s(6,C="STOP"),V=window.setInterval(()=>{g==0&&(clearInterval(_),U=125,s(0,v.style.color=`hsl(${U}, 70%, 65%)`,v),S=!S,g=S?300:1500,_=window.setInterval(H,S?2400:12e3),ke({playerInstance:p,context_uri:S?t[1]:t[0]})),g-=1,s(5,A=Math.floor(g/60).toString().padStart(2,"0")+":"+Math.floor(g%60).toString().padStart(2,"0"))},10),_=window.setInterval(H,12e3),g<1500){p.resume();return}ke({playerInstance:p,context_uri:S?t[1]:t[0]}),s(1,P.onload=()=>{P.classList.remove("hidden")},P)}}window.onSpotifyWebPlaybackSDKReady=()=>{console.log("ready"),p=new Spotify.Player({name:"Pomodorify Web Player",getOAuthToken:r=>{let y=localStorage.getItem("token");y||window.location.replace(`https://accounts.spotify.com/authorize?client_id=be3d4b654a8347b8a805a6802eadce1b&response_type=token&redirect_uri=${encodeURIComponent(window.location.href)}callback&scope=streaming%20user-read-email%20user-read-private%20user-modify-playback-state`),r(y)}}),p.addListener("ready",({device_id:r})=>{p._options.id=r}),p.addListener("authentication_error",()=>{localStorage.removeItem("token"),window.location.reload()}),p.addListener("player_state_changed",({track_window:{current_track:r}})=>{s(2,B=r.album.images[2].url),s(3,T=r.name),s(4,i="");for(let y=0;y<r.artists.length;y++)s(4,i+=r.artists[y].name),y!=r.artists.length-1&&s(4,i+=", ")}),p.connect()},localStorage.getItem("p1")&&(t[0]=localStorage.getItem("p1")),localStorage.getItem("p2")&&(t[1]=localStorage.getItem("p2")),Ve.add(Ue,je),Ce.watch();function O(){t[0]=this.value,s(7,t)}function K(){t[1]=this.value,s(7,t)}function D(r){xe[r?"unshift":"push"](()=>{v=r,s(0,v)})}function q(r){xe[r?"unshift":"push"](()=>{P=r,s(1,P)})}return[v,P,B,T,i,A,C,t,d,O,K,D,q]}class Oe extends Te{constructor(m){super();Ae(this,m,Be,Le,De,{})}}export{Oe as default};
